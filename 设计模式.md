## 单例模式

1. 饿汉式

   ```java
   package 单例模式;
   
   import java.util.concurrent.atomic.AtomicLong;
   
   public class 单例_饿汉式 {
   
       //类加载时创建好实例
       private static final 单例_饿汉式 instance = new 单例_饿汉式();
   
       //构造私有化
       private 单例_饿汉式() {
       }
   
       //提供获取实例方法
       public static 单例_饿汉式 getInstance() {
           return instance;
       }
   
       private AtomicLong id = new AtomicLong(0);
   
       public long getId() {
           return id.incrementAndGet();
       }
   }
   
   ```

   

2. 懒汉式

   ```JAVA
   package 单例模式;
   
   import java.util.concurrent.atomic.AtomicLong;
   
   public class 单例_懒汉式 {
       //支持延迟加载
       private static 单例_懒汉式 instance;
   
       //构造私有化
       private 单例_懒汉式() {
       }
   
       //提供获取实例方法 synchronized锁
       public static synchronized 单例_懒汉式 getInstance() {
           if (instance == null) {
               instance = new 单例_懒汉式();
           }
           return instance;
       }
   
       private AtomicLong id = new AtomicLong(0);
   
       public long getId() {
           return id.incrementAndGet();
       }
   }
   
   ```

   

3. 双重检测

   ```java
   package 单例模式;
   
   import java.util.concurrent.atomic.AtomicLong;
   
   public class 单例_双重检测 {
       //支持延迟加载
       private static 单例_双重检测 instance;
   
       //构造私有化
       private 单例_双重检测() {
       }
   
       //提供获取实例方法 类级别的锁
       public static 单例_双重检测 getInstance() {
           if (instance == null) {
               synchronized (单例_双重检测.class) { // 此处为类级别的锁
                   if (instance == null) {
                       instance = new 单例_双重检测();
                   }
               }
           }
           return instance;
       }
   
       private AtomicLong id = new AtomicLong(0);
   
       public long getId() {
           return id.incrementAndGet();
       }
   }
   
   ```

   

4. 静态内部类

   ```java
   package 单例模式;
   
   import java.util.concurrent.atomic.AtomicLong;
   
   public class 单例_静态内部类 {
       //支持延迟加载
   
       //构造私有化
       private 单例_静态内部类() {
       }
   
       //静态内部类
       public static class SingletonHolder {
           private static final 单例_静态内部类 instance = new 单例_静态内部类();
       }
   
       //提供获取实例方法
       public static 单例_静态内部类 getInstance() {
           return SingletonHolder.instance;
       }
   
       private AtomicLong id = new AtomicLong(0);
   
       public long getId() {
           return id.incrementAndGet();
       }
   }
   
   ```

   

5. 枚举

   ```java
   package 单例模式;
   
   import java.util.concurrent.atomic.AtomicLong;
   
   public enum 单例_枚举 {
   
       INSTANCE;
   
       private AtomicLong id = new AtomicLong(0);
   
       public long getId() {
           return id.incrementAndGet();
       }
   }
   
   ```

   

